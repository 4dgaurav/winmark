;window.Modernizr=function(a,b,c){function z(a){j.cssText=a}function A(a,b){return z(m.join(a+";")+(b||""))}function B(a,b){return typeof a===b}function C(a,b){return!!~(""+a).indexOf(b)}function D(a,b){for(var d in a)if(j[a[d]]!==c)return b=="pfx"?a[d]:!0;return!1}function E(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:B(f,"function")?f.bind(d||b):f}return!1}function F(a,b,c){var d=a.charAt(0).toUpperCase()+a.substr(1),e=(a+" "+o.join(d+" ")+d).split(" ");return B(b,"string")||B(b,"undefined")?D(e,b):(e=(a+" "+p.join(d+" ")+d).split(" "),E(e,b,c))}var d="2.5.3",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k,l={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),n="Webkit Moz O ms",o=n.split(" "),p=n.toLowerCase().split(" "),q={},r={},s={},t=[],u=t.slice,v,w=function(a,c,d,e){var f,i,j,k=b.createElement("div"),l=b.body,m=l?l:b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),k.appendChild(j);return f=["&#173;","<style>",a,"</style>"].join(""),k.id=h,(l?k:m).innerHTML+=f,m.appendChild(k),l||(m.style.background="",g.appendChild(m)),i=c(k,a),l?k.parentNode.removeChild(k):m.parentNode.removeChild(m),!!i},x={}.hasOwnProperty,y;!B(x,"undefined")&&!B(x.call,"undefined")?y=function(a,b){return x.call(a,b)}:y=function(a,b){return b in a&&B(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=u.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(u.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(u.call(arguments)))};return e});var G=function(a,c){var d=a.join(""),f=c.length;w(d,function(a,c){var d=b.styleSheets[b.styleSheets.length-1],g=d?d.cssRules&&d.cssRules[0]?d.cssRules[0].cssText:d.cssText||"":"",h=a.childNodes,i={};while(f--)i[h[f].id]=h[f];e.csstransforms3d=(i.csstransforms3d&&i.csstransforms3d.offsetLeft)===9&&i.csstransforms3d.offsetHeight===3},f,c)}([,["@media (",m.join("transform-3d),("),h,")","{#csstransforms3d{left:9px;position:absolute;height:3px;}}"].join("")],[,"csstransforms3d"]);q.csstransforms3d=function(){var a=!!F("perspective");return a&&"webkitPerspective"in g.style&&(a=e.csstransforms3d),a},q.csstransitions=function(){return F("transition")};for(var H in q)y(q,H)&&(v=H.toLowerCase(),e[v]=q[H](),t.push((e[v]?"":"no-")+v));return z(""),i=k=null,function(a,b){function g(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function h(){var a=k.elements;return typeof a=="string"?a.split(" "):a}function i(a){var b={},c=a.createElement,e=a.createDocumentFragment,f=e();a.createElement=function(a){var e=(b[a]||(b[a]=c(a))).cloneNode();return k.shivMethods&&e.canHaveChildren&&!d.test(a)?f.appendChild(e):e},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+h().join().replace(/\w+/g,function(a){return b[a]=c(a),f.createElement(a),'c("'+a+'")'})+");return n}")(k,f)}function j(a){var b;return a.documentShived?a:(k.shivCSS&&!e&&(b=!!g(a,"article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio{display:none}canvas,video{display:inline-block;*display:inline;*zoom:1}[hidden]{display:none}audio[controls]{display:inline-block;*display:inline;*zoom:1}mark{background:#FF0;color:#000}")),f||(b=!i(a)),b&&(a.documentShived=b),a)}var c=a.html5||{},d=/^<|^(?:button|form|map|select|textarea)$/i,e,f;(function(){var a=b.createElement("a");a.innerHTML="<xyz></xyz>",e="hidden"in a,f=a.childNodes.length==1||function(){try{b.createElement("a")}catch(a){return!0}var c=b.createDocumentFragment();return typeof c.cloneNode=="undefined"||typeof c.createDocumentFragment=="undefined"||typeof c.createElement=="undefined"}()})();var k={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:j};a.html5=k,j(b)}(this,b),e._version=d,e._prefixes=m,e._domPrefixes=p,e._cssomPrefixes=o,e.testProp=function(a){return D([a])},e.testAllProps=F,e.testStyles=w,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+t.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return o.call(a)=="[object Function]"}function e(a){return typeof a=="string"}function f(){}function g(a){return!a||a=="loaded"||a=="complete"||a=="uninitialized"}function h(){var a=p.shift();q=1,a?a.t?m(function(){(a.t=="c"?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){a!="img"&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l={},o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};y[c]===1&&(r=1,y[c]=[],l=b.createElement(a)),a=="object"?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),a!="img"&&(r||y[c]===2?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i(b=="c"?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),p.length==1&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&o.call(a.opera)=="[object Opera]",l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return o.call(a)=="[object Array]"},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,i){var j=b(a),l=j.autoCallback;j.url.split(".").pop().split("?").shift(),j.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]||h),j.instead?j.instead(a,e,f,g,i):(y[j.url]?j.noexec=!0:y[j.url]=1,f.load(j.url,j.forceCSS||!j.forceJS&&"css"==j.url.split(".").pop().split("?").shift()?"c":c,j.noexec,j.attrs,j.timeout),(d(e)||d(l))&&f.load(function(){k(),e&&e(j.origUrl,i,g),l&&l(j.origUrl,i,g),y[j.url]=2})))}function i(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var j,l,m=this.yepnope.loader;if(e(a))g(a,0,m,0);else if(w(a))for(j=0;j<a.length;j++)l=a[j],e(l)?g(l,0,m,0):w(l)?B(l):Object(l)===l&&i(l,m);else Object(a)===a&&i(a,m)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,b.readyState==null&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};

(function(e){function t(e){var t=["Moz","Webkit","O","ms"],n=e.charAt(0).toUpperCase()+e.substr(1);if(e in l.style)return e;for(e=0;e<t.length;++e){var r=t[e]+n;if(r in l.style)return r}}function n(e){"string"===typeof e&&this.parse(e);return this}function r(e,t,n){!0===t?e.queue(n):t?e.queue(t,n):n()}function i(t){var n=[];e.each(t,function(t){t=e.camelCase(t);t=e.transit.propertyMap[t]||t;t=u(t);-1===e.inArray(t,n)&&n.push(t)});return n}function s(t,n,r,s){t=i(t);e.cssEase[r]&&(r=e.cssEase[r]);var o=""+f(n)+" "+r;0<parseInt(s,10)&&(o+=" "+f(s));var u=[];e.each(t,function(e,t){u.push(t+" "+o)});return u.join(", ")}function o(t,r){r||(e.cssNumber[t]=!0);e.transit.propertyMap[t]=c.transform;e.cssHooks[t]={get:function(r){return(e(r).css("transform")||new n).get(t)},set:function(r,i){var s=e(r).css("transform")||new n;s.setFromString(t,i);e(r).css({transform:s})}}}function u(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function a(e,t){return"string"===typeof e&&!e.match(/^[\-0-9\.]+$/)?e:""+e+t}function f(t){e.fx.speeds[t]&&(t=e.fx.speeds[t]);return a(t,"ms")}e.transit={version:"0.1.3",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var l=document.createElement("div"),c={},h=-1<navigator.userAgent.toLowerCase().indexOf("chrome");c.transition=t("transition");c.transitionDelay=t("transitionDelay");c.transform=t("transform");c.transformOrigin=t("transformOrigin");l.style[c.transform]="";l.style[c.transform]="rotateY(90deg)";c.transform3d=""!==l.style[c.transform];e.extend(e.support,c);var p=c.transitionEnd={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"}[c.transition]||null,l=null;e.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)"};e.cssHooks.transform={get:function(t){return e(t).data("transform")},set:function(t,r){var i=r;i instanceof n||(i=new n(i));t.style[c.transform]="WebkitTransform"===c.transform&&!h?i.toString(!0):i.toString();e(t).data("transform",i)}};e.cssHooks.transformOrigin={get:function(e){return e.style[c.transformOrigin]},set:function(e,t){e.style[c.transformOrigin]=t}};o("scale");o("translate");o("rotate");o("rotateX");o("rotateY");o("rotate3d");o("perspective");o("skewX");o("skewY");o("x",!0);o("y",!0);n.prototype={setFromString:function(e,t){var r="string"===typeof t?t.split(","):t.constructor===Array?t:[t];r.unshift(e);n.prototype.set.apply(this,r)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=a(e,"deg")},rotateX:function(e){this.rotateX=a(e,"deg")},rotateY:function(e){this.rotateY=a(e,"deg")},scale:function(e,t){void 0===t&&(t=e);this.scale=e+","+t},skewX:function(e){this.skewX=a(e,"deg")},skewY:function(e){this.skewY=a(e,"deg")},perspective:function(e){this.perspective=a(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){void 0===this._translateX&&(this._translateX=0);void 0===this._translateY&&(this._translateY=0);null!==e&&(this._translateX=a(e,"px"));null!==t&&(this._translateY=a(t,"px"));this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");e[0]&&(e[0]=parseFloat(e[0]));e[1]&&(e[1]=parseFloat(e[1]));return e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this.rotate3d||"0,0,0,0deg").split(","),t=0;3>=t;++t)e[t]&&(e[t]=parseFloat(e[t]));e[3]&&(e[3]=a(e[3],"deg"));return e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,r){t.setFromString(n,r)})},toString:function(e){var t=[],n;for(n in this)if(this.hasOwnProperty(n)&&(c.transform3d||!("rotateX"===n||"rotateY"===n||"perspective"===n||"transformOrigin"===n)))"_"!==n[0]&&(e&&"scale"===n?t.push(n+"3d("+this[n]+",1)"):e&&"translate"===n?t.push(n+"3d("+this[n]+",0)"):t.push(n+"("+this[n]+")"));return t.join(" ")}};e.fn.transition=e.fn.transit=function(t,n,i,o){var u=this,a=0,l=!0;"function"===typeof n&&(o=n,n=void 0);"function"===typeof i&&(o=i,i=void 0);"undefined"!==typeof t.easing&&(i=t.easing,delete t.easing);"undefined"!==typeof t.duration&&(n=t.duration,delete t.duration);"undefined"!==typeof t.complete&&(o=t.complete,delete t.complete);"undefined"!==typeof t.queue&&(l=t.queue,delete t.queue);"undefined"!==typeof t.delay&&(a=t.delay,delete t.delay);"undefined"===typeof n&&(n=e.fx.speeds._default);"undefined"===typeof i&&(i=e.cssEase._default);var n=f(n),h=s(t,n,i,a),v=e.transit.enabled&&c.transition?parseInt(n,10)+parseInt(a,10):0;if(0===v)return r(u,l,function(e){u.css(t);o&&o();e()}),u;var m={},g=function(n){var r=!1,i=function(){r&&u.unbind(p,i);0<v&&u.each(function(){this.style[c.transition]=m[this]||null});"function"===typeof o&&o.apply(u);"function"===typeof n&&n()};0<v&&p&&e.transit.useTransitionEnd?(r=!0,u.bind(p,i)):window.setTimeout(i,v);u.each(function(){0<v&&(this.style[c.transition]=h);e(this).css(t)})};r(u,l,function(e){var t=0;"MozTransition"===c.transition&&25>t&&(t=25);window.setTimeout(function(){g(e)},t)});return this};e.transit.getTransitionValue=s})(jQuery);(function(e,t){"use strict";var n="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(r){function c(){var t=e(f),n=e(l);if(s){if(l.length){s.reject(u,t,n)}else{s.resolve(u)}}if(e.isFunction(r)){r.call(i,u,t,n)}}function h(t,r){if(t.src===n||e.inArray(t,a)!==-1){return}a.push(t);if(r){l.push(t)}else{f.push(t)}e.data(t,"imagesLoaded",{isBroken:r,src:t.src});if(o){s.notifyWith(e(t),[r,u,e(f),e(l)])}if(u.length===a.length){setTimeout(c);u.unbind(".imagesLoaded")}}var i=this,s=e.isFunction(e.Deferred)?e.Deferred():0,o=e.isFunction(s.notify),u=i.find("img").add(i.filter("img")),a=[],f=[],l=[];if(!u.length){c()}else{u.bind("load.imagesLoaded error.imagesLoaded",function(e){h(e.target,e.type==="error")}).each(function(r,i){var s=i.src;var o=e.data(i,"imagesLoaded");if(o&&o.src===s){h(i,o.isBroken);return}if(i.complete&&i.naturalWidth!==t){h(i,i.naturalWidth===0||i.naturalHeight===0);return}if(i.readyState||i.complete){i.src=n;i.src=s}})}return s?s.promise(i):i}})(jQuery);(function(e){function i(n){function v(){if(n){s.removeData(n)}else{if(c){delete t[c]}}}function m(){o.id=setTimeout(function(){o.fn()},h)}var i=this,s,o={},u=n?e.fn:e,f=arguments,l=4,c=f[1],h=f[2],p=f[3];if(typeof c!=="string"){l--;c=n=0;h=f[1];p=f[2]}if(n){s=i.eq(0);s.data(n,o=s.data(n)||{})}else{if(c){o=t[c]||(t[c]={})}}o.id&&clearTimeout(o.id);delete o.id;if(p){o.fn=function(e){if(typeof p==="string"){p=u[p]}p.apply(i,r.call(f,l))===true&&!e?m():v()};m()}else{if(o.fn){h===undefined?v():o.fn(h===false);return true}else{v()}}}var t={},n="doTimeout",r=Array.prototype.slice;e[n]=function(){return i.apply(window,[0].concat(r.call(arguments)))};e.fn[n]=function(){var e=r.call(arguments),t=i.apply(this,[n+e[0]].concat(e));return typeof e[0]==="number"||typeof e[1]==="number"?this:t}})(jQuery);(function(e,t){"use strict";e.GridGallery=function(t,n){this.$list=e(n);this._init(t)};e.GridGallery.defaults={lines:true,speed:900,hideSpeed:700,lineSpeed:700,fadeSpeed:1e3};e.GridGallery.prototype={_init:function(t){var n=this;this.options=e.extend(true,{},e.GridGallery.defaults,t);this.current=0;this.isAnimating=false;this.support=Modernizr.csstransforms3d&&Modernizr.csstransitions;this._layout();this.$list.imagesLoaded(function(){n.$list.remove();n._saveSlides();n._grid();n._addNavigation();n._initEvents();setTimeout(function(){n._showSlide(n.current)},500);n.$loader.hide()})},_saveSlides:function(){var t=this.$list.children("li");this.slidesCount=t.length;this.slides=[];for(var n=0;n<this.slidesCount;++n){var r=t.eq(n),i=r.children();this.slides[n]={w:r.data("w"),h:r.data("h"),boxesCount:i.length,content:i.map(function(){var t=e(this);return{title:t.attr("title"),src:t.attr("src"),inner:t.html(),rotateX:t.data("rotateX")|0,rotateY:t.data("rotateY")|0,rotateZ:t.data("rotateZ")|0,translateX:t.data("translateX")|0,translateY:t.data("translateY")|0,translateZ:t.data("translateZ")|0,isImage:t.is("img")}})}}},_layout:function(){this.$gridWrapper=e('<div class="sg-wrapper"></div>');this.$gridWrapper.insertBefore(this.$list);this.$loader=e('<div class="sg-loading"></div> ').appendTo(this.$gridWrapper)},_grid:function(){this.$box1=e('<div class="sg-box sg-box-1"></div>');this.$box2=e('<div class="sg-box sg-box-2"></div>');this.$box3=e('<div class="sg-box sg-box-3"></div>');this.$box4=e('<div class="sg-box sg-box-4"></div>');this.$gridWrapper.append(this.$box1,this.$box2,this.$box3,this.$box4);this.$gridBoxes=this.$gridWrapper.children("div.sg-box");if(this.options.lines){this._addGridLines();this._moveGridLines("50%","50%")}},_addGridLines:function(){var t={opacity:0},n={opacity:1};this.$gridLineH=e('<div class="sg-line-hor"></div>').css(t);this.$gridLineV=e('<div class="sg-line-ver"></div>').css(t);this.$gridWrapper.append(this.$gridLineH.transition(n,this.options.fadeSpeed),this.$gridLineV.transition(n,this.options.fadeSpeed))},_moveGridLines:function(t,n,r){var i=this;return e.Deferred(function(e){if(i.options.lines){if(r){var s=i.$gridLineV.css("left"),o=i.$gridLineH.css("top");if(s===t&&o===n){e.resolve()}else if(s===t&&o!==n){i.$gridLineV.transition({left:t},i.options.lineSpeed);i.$gridLineH.transition({top:n},i.options.lineSpeed,e.resolve)}else{i.$gridLineV.transition({left:t},i.options.lineSpeed,e.resolve);i.$gridLineH.transition({top:n},i.options.lineSpeed)}}else{i.$gridLineV.css("left",t);i.$gridLineH.css("top",n);e.resolve()}}else{e.resolve()}}).promise()},_addNavigation:function(){if(this.slidesCount>1){this.$nav=e('<nav class="sg-nav"></nav>').css("opacity",0);this.$navPrev=e('<span class="sg-prev"></span>').appendTo(this.$nav);for(var t=0;t<this.slidesCount;++t){var n="sg-dot";if(t===0)n+=" sg-dot-current";this.$nav.append('<span class="'+n+'"></span>')}this.$navNext=e('<span class="sg-next"></span>').appendTo(this.$nav);this.$gridWrapper.append(this.$nav.transition({opacity:1},this.options.fadeSpeed));this.$dots=this.$nav.children("span.sg-dot")}},_showSlide:function(t){this.isAnimating=true;var n=this,r=this.slides[t],i=r.w,s=r.h,o=r.boxesCount,u=r.content,a,f,l={width:"0%",height:"0%"};switch(o){case 4:case 3:a=i+"%";f=s+"%";break;case 2:if(i===100){a="105%";f=s+"%";this.$box2.css(l);this.$box4.css(l)}else if(s===100){a=i+"%";f="105%";this.$box3.css(l);this.$box4.css(l)}break;case 1:a=i+5+"%";f=s+5+"%";this.$box2.css(l);this.$box3.css(l);this.$box4.css(l);break}this._hideSlide();e.when(n._moveGridLines(a,f,true)).done(function(){for(var t=0;t<o;++t){var r=u[t],a=e("<div/>"),f="translateX("+r.translateX+"px) translateY("+r.translateY+"px) translateZ("+r.translateZ+"px) rotateX("+r.rotateX+"deg) rotateY("+r.rotateY+"deg) rotateZ("+r.rotateZ+"deg)",l={"-webkit-transition":"none","-moz-transition":"none","-o-transition":"none","-ms-transition":"none",transition:"none",opacity:0,"-webkit-transform":f,"-moz-transform":f,"-o-transform":f,"-ms-transform":f,transform:f};if(r.isImage){l.backgroundImage="url("+r.src+")";a.append("<h2>"+r.title+"</h2>")}else{a.html(r.inner)}var c=e('<div class="sg-panel"></div>').append(a.css(l)),p,d;switch(t){case 0:p=n.$box1;d={width:i+"%",height:s+"%"};break;case 1:if(o===2&&i===100){p=n.$box3;d={width:i+"%",height:100-s+"%",top:s+"%"}}else{p=n.$box2;d={width:100-i+"%",height:s+"%",left:i+"%"}}break;case 2:p=n.$box3;d={width:i+"%",height:100-s+"%",top:s+"%"};break;case 3:p=n.$box4;d={width:100-i+"%",height:100-s+"%",left:i+"%",top:s+"%"};break}p.empty().css(d).append(c);var v="rotateX(0deg) rotateY(0deg) rotateZ(0deg) translateX(0px) translateY(0px) translateZ(0px)",m="all "+n.options.speed+"ms ease";a.doTimeout(1,function(){this.css({"-webkit-transition":m,"-moz-transition":m,"-o-transition":m,"-ms-transition":m,transition:m,opacity:1,"-webkit-transform":v,"-moz-transform":v,"-o-transform":v,"-ms-transform":v,transform:v});n.support?this.on("webkitTransitionEnd.gridgallery transitionend.gridgallery oTransitionEnd.gridgallery",function(){e(this).css({"-webkit-transition":"none","-moz-transition":"none","-o-transition":"none","-ms-transition":"none",transition:"none"});n.isAnimating=false}):n.isAnimating=false})}})},_hideSlide:function(){var t=this;return e.Deferred(function(e){var n=t.$gridBoxes.children("div.sg-panel");n.length>0?n.transition({opacity:0},t.options.hideSpeed,e.resolve):e.resolve()}).promise()},_initEvents:function(){var t=this;this.$navNext.on("click.gridgallery",function(e){if(!t.isAnimating){t.current>=t.slidesCount-1?t.current=0:++t.current;t._showSlide(t.current);t._updateNavigation()}});this.$navPrev.on("click.gridgallery",function(e){if(!t.isAnimating){t.current===0?t.current=t.slidesCount-1:--t.current;t._showSlide(t.current);t._updateNavigation()}});this.$dots.on("click.gridgallery",function(n){if(!t.isAnimating){var r=e(this),i=r.index()-1;t._updateNavigation(r);if(t.current===i){return false}t.current=i;t._showSlide(t.current)}})},_updateNavigation:function(e){var e=e||this.$dots.eq(this.current);this.$dots.removeClass("sg-dot-current");e.addClass("sg-dot-current")}};var n=function(e){if(this.console){console.error(e)}};e.fn.gridgallery=function(t){if(typeof t==="string"){var r=Array.prototype.slice.call(arguments,1);this.each(function(){var i=e.data(this,"gridgallery");if(!i){n("cannot call methods on gridgallery prior to initialization; "+"attempted to call method '"+t+"'");return}if(!e.isFunction(i[t])||t.charAt(0)==="_"){n("no such method '"+t+"' for gridgallery instance");return}i[t].apply(i,r)})}else{this.each(function(){var n=e.data(this,"gridgallery");if(!n){e.data(this,"gridgallery",new e.GridGallery(t,this))}})}return this}})(jQuery)